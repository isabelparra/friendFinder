<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <title>Friend Finder</title>
    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

    <!-- Chosen -->
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.css'>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.jquery.min.js'></script>

</head>

<body>
    
<div class='container'>
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class='panel-heading'>
                    <h2 class='panel-title'>Survey Questions</h2>
                </div>

                <div class='panel-body'>
                
           
        <form role='form'>
            <h3>About You</h3>

            <div class="form-group">
                <label for='name'>Name (Required)</label>
                <input type='text' class='form-control' id='name' required>
            </div>

            <div class="form-group">
                <input type='text' class='form-control' id='photo' required>
            </div>
      

        <h2 class='question'>Question 1</h2>
        <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. </p>
            <select id='q1' data-placeholder="Select an Option" class="chosen-select" tabindex="1">
              <option value=""></option>
              <option>1 (Strongly Disagree)</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5 (Strongly Agree)</option>                 
            </select>

        <h2 class='question'>Question 2</h2>
        <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. </p>
            <select id='q2' data-placeholder="Select an Option" class="chosen-select" tabindex="2">
              <option value=""></option>
              <option>1 (Strongly Disagree)</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5 (Strongly Agree)</option>                 
            </select>   
            <h2 class='question'>Question 3</h2>
            <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. </p>
                <select id='q3' data-placeholder="Select an Option" class="chosen-select" tabindex="3">
                  <option value=""></option>
                  <option>1 (Strongly Disagree)</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5 (Strongly Agree)</option>                 
                </select>
    
        <h2 class='question'>Question 4</h2>
        <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. </p>
            <select id='q4'data-placeholder="Select an Option" class="chosen-select" tabindex="4">
                <option value=""></option>
                <option>1 (Strongly Disagree)</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5 (Strongly Agree)</option>                 
            </select>           
            <h2 class='question'>Question 5</h2>
            <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. </p>
                <select id='q5' data-placeholder="Select an Option" class="chosen-select" tabindex="5">
                  <option value=""></option>
                  <option>1 (Strongly Disagree)</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5 (Strongly Agree)</option>                 
                </select>
    
        <h2 class='question'>Question 6</h2>
        <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. </p>
            <select id='q6' data-placeholder="Select an Option" class="chosen-select" tabindex="6">
                <option value=""></option>
                <option>1 (Strongly Disagree)</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5 (Strongly Agree)</option>                 
            </select>        
            <h2 class='question'>Question 7</h2>
            <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. </p>
                <select id='q7' data-placeholder="Select an Option" class="chosen-select" tabindex="7">
                    <option value=""></option>
                    <option>1 (Strongly Disagree)</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5 (Strongly Agree)</option>                 
                </select>  
                <h2 class='question'>Question 8</h2>
                <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. </p>
                    <select id='q8' data-placeholder="Select an Option" class="chosen-select" tabindex="8">
                        <option value=""></option>
                        <option>1 (Strongly Disagree)</option>
                          <option>2</option>
                          <option>3</option>
                          <option>4</option>
                          <option>5 (Strongly Agree)</option>                 
                    </select>
                <h2 class='question'>Question 9</h2>
                <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. </p>
                    <select id='q9' data-placeholder="Select an Option" class="chosen-select" tabindex="9">
                            <option value=""></option>
                        <option>1 (Strongly Disagree)</option>
                          <option>2</option>
                          <option>3</option>
                          <option>4</option>
                          <option>5 (Strongly Agree)</option>                 
                    </select> 
                    <h2 class='question'>Question 10</h2>
                <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. </p>
                    <select id='q10' data-placeholder="Select an Option" class="chosen-select" tabindex="10">
                        <option value=""></option>
                        <option>1 (Strongly Disagree)</option>
                          <option>2</option>
                          <option>3</option>
                          <option>4</option>
                          <option>5 (Strongly Agree)</option>                 
                    </select>      
                    <br><br>       

                    <button type='submit' class='btn btn-primary' data-target='modal' id='submit'>Submit</button>
         
            </form>
        </div>

    </div>
<br>
    <footer class="footer">
        <div class="container">
          <p><a href="/api/friends">API Table Link</a> | <a href="https://github.com/isabelparra/friendFinder">GitHub Repo</a></p>
        </div>
      </footer>


    <!-- Modal -->
    <div id="results" class="modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Best Match</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <h2 id="matchName"></h2>
                  <img id="matchPhoto" src='' alt=''>
                </div>
                <div class="modal-footer">
                  <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
            </div>
          <!-- </div> -->


<script type='text/javascript'>
    var config = {
    '.chosen-select': {},
    '.chosen-select-deselect': {
      allow_single_deselect: true
    },
    '.chosen-select-no-single': {
      disable_search_threshold: 10
    },
    '.chosen-select-no-results': {
      no_results_text: 'Oops, nothing found!'
    },
    '.chosen-select-width': {
      width: "95%"
    }
  }
    for (var selector in config) {
      $(selector).chosen(config[selector]);
    }

// capture user input
    $('#submit').on('click', function(event){
        event.preventDefault();

        // $('.chosen-select').each(function() {
        //     if($(this).val() === "")
        //     is
        
        // Grab the form element
            var newUser = {
                name: $('#name').val(),
                photo: $('#photo').val(),
                scores: [
                $('#q1').val(), 
                $('#q2').val(), 
                $('#q3').val(), 
                $('#q4').val(),
                $('#q5').val(),
                $('#q6').val(),
                $('#q7').val(),
                $('#q8').val(),
                $('#q9').val(),
                $('#q10').val(),
                ]
            };

            console.log('newUser = ' +  JSON.stringify(newUser));

            // var currentURL = window.location.origin;

            //AJAX post the data to friends API

            $.post('/api/friends', newUser)
            .done(function(data) {
                console.log('response =' + JSON.stringify(newUser));
                // if (data) {
                    // alert('matching');
                    $('#matchName').html(data.name);
                    $('#matchPhoto').attr('src', data.photo);

                    // $('#modal').modal('toggle');
                    $('#results').modal('toggle');
                    
                    // $('#matchName').text(data.name);
                    
                    // show modal with best match
                //     $('#results').modal('toggle');
                // } else {
                //     alert('please fill out all fields');
                // }
                
                
                
               

                // return false;

    //clear form
                // $('#name').val('');
                // $('#photo').val('');
                // $('#scores').val('');

            });
        
       
        });
    
</script>

 
</body>
</html>
